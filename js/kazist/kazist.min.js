jQuery(document).ready(function(){jQuery("input[type='checkbox'], input[type='radio']").on("ifChecked",function(){var a=jQuery(this).find("input");if(a.is(":checked")){a.attr("checked","checked")}else{a.removeAttr("checked")}});jQuery(".select-button .btn").click(function(){onClickSelectButtons(jQuery(this))});kazist.init()});function onClickSelectButtons(c){var a=c.closest(".btn-group");var b=c.closest(".btn");a.find(".btn").removeClass("active").removeClass("btn-primary").addClass("btn-default");a.find("input").removeAttr("checked");b.addClass("btn-primary").removeClass("btn-default");b.find("input").attr("checked","checked")}kazist=function(){return{init:function(){kazist.addEvents(jQuery("body"))},addEvents:function(a){a.find(".item-yesno").on("click",function(){this_element=jQuery(this);return kazist_adminevents.yesNoStatusUpdate(this_element)});a.find(".pagination-select").change(function(){jQuery(this).closest("form").submit();console.log(jQuery(this).closest("form"))});a.find("input[type='checkbox'], input[type='radio']").on("ifChecked",function(){var b=jQuery(this).find("input");if(b.is(":checked")){b.attr("checked","checked")}else{b.removeAttr("checked")}});a.find(".select_all_cid").click(function(){if(this.checked){jQuery(this).closest("table").find(".cid").each(function(){this.checked=true})}else{jQuery(this).closest("table").find(".cid").each(function(){this.checked=false})}});a.find(".confirm_delete").click(function(){var b=confirm("Are you sure you want to delete selected record.");if(!b){return kazist.confirmDelete()}return false});a.find(".kazi-delete").click(function(){kazist.setViewNSubmit("delete")});a.find(".kazi-add").click(function(){jQuery(".cid").prop("checked",false);kazist.setViewNSubmit("add","save")});a.find(".kazi-delete").click(function(){kazist.setViewNSubmit("delete")});a.find(".kazi-detail").click(function(){kazist.setViewNSubmit("detail")});a.find(".kazi-edit").click(function(){kazist.setViewNSubmit("edit")});a.find(".kazi-save").click(function(){kazist.setSubmit("save")});a.find(".kazi-savenew").click(function(){kazist.setViewNSubmit("save","savenew")});a.find(".kazi-savecopy").click(function(){kazist.setViewNSubmit("save","savecopy")});a.find(".kazi-saveclose").click(function(){kazist.setViewNSubmit("save","saveclose")});a.find(".kazi-cancel").click(function(){window.history.back();return false});a.find(".kazi-print").click(function(){window.print();return false});a.find(".select-button .btn").click(function(){kazist.onClickSelectButtons(jQuery(this))});a.find(".cancel-search").click(function(){var c=jQuery(this).closest("form");var b=c.find("input:text, input:radio, select");b.each(function(){jQuery(this).val("")});c.submit()});kazist.initializeEditor()},initializeEditor:function(){kazi_editor_height=jQuery("textarea.kazi-editor").attr("height");is_tinyMCE_active=false;if(typeof(tinyMCE)!="undefined"){if(tinyMCE.activeEditor==null||tinyMCE.activeEditor.isHidden()!=false){is_tinyMCE_active=true}}if(is_tinyMCE_active){tinymce.init({selector:"textarea.kazi-editor-basic",plugins:["advlist autolink autosave link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","table contextmenu directionality emoticons template textcolor paste textcolor colorpicker textpattern fullscreen"],toolbar:"bold italic underline | alignleft aligncenter alignright  | fontsizeselect | forecolor backcolor | bullist numlist",menubar:false,toolbar_items_size:"small",document_base_url:kazist_document.web_root,powerpaste_word_import:"clean",powerpaste_html_import:"merge"});tinymce.init({selector:"textarea.kazi-editor-medium",plugins:["advlist autolink autosave link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","table contextmenu directionality emoticons template textcolor paste textcolor colorpicker textpattern fullscreen"],toolbar:"bold italic underline | alignleft aligncenter alignright  | fontselect fontsizeselect | forecolor backcolor |  hr | bullist numlist | link unlink image media | table",toolbar_items_size:"small",document_base_url:kazist_document.web_root,powerpaste_word_import:"clean",powerpaste_html_import:"merge",file_browser_callback:function(c,a,b,d){if(b==="file"){jQuery("#linkModal").css("z-index","100000");jQuery("#linkModal").modal("show");jQuery("#linkModal .kazicode_link_source").val("editor");jQuery("#linkModal .kazicode_link_search_type").val(b);jQuery("#linkModal .kazicode_link_input_id").val(c)}else{jQuery("#mediaModal").css("z-index","100000");jQuery("#mediaModal").modal("show");jQuery("#mediaModal .kazicode_media_source").val("editor");jQuery("#mediaModal .kazicode_media_search_type").val(b);jQuery("#mediaModal .kazicode_media_input_id").val(c)}}});tinymce.init({selector:"textarea.kazi-editor-advanced",plugins:["advlist autolink autosave link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","table contextmenu directionality emoticons template textcolor paste textcolor colorpicker textpattern fullscreen"],toolbar:"bold italic underline strikethrough | alignleft aligncenter alignright alignjustify  | fontselect fontsizeselect | forecolor backcolor | cut copy paste searchreplace | hr | bullist numlist | outdent indent | undo redo | link unlink image media | table",toolbar_items_size:"small",menubar:false,document_base_url:kazist_document.web_root,powerpaste_word_import:"clean",powerpaste_html_import:"merge",file_browser_callback:function(c,a,b,d){if(b==="file"){jQuery("#linkModal").css("z-index","100000");jQuery("#linkModal").modal("show");jQuery("#linkModal .kazicode_link_source").val("editor");jQuery("#linkModal .kazicode_link_search_type").val(b);jQuery("#linkModal .kazicode_link_input_id").val(c)}else{jQuery("#mediaModal").css("z-index","100000");jQuery("#mediaModal").modal("show");jQuery("#mediaModal .kazicode_media_source").val("editor");jQuery("#mediaModal .kazicode_media_search_type").val(b);jQuery("#mediaModal .kazicode_media_input_id").val(c)}}})}},setSubmit:function(){var a=jQuery("#main_form_id").val();jQuery("#"+a).submit()},setViewNSubmit:function(b,c){var e=kazist_document.base_route;var d=jQuery("#main_form_id").val();var a=kazist_document.web_base+"/"+e.split(".").join("/");if(b!=""&&typeof b!="undefined"){a+="/"+b}if(c!=""&&typeof c!="undefined"){a+="?activity="+c}jQuery("#"+d).attr("action",a);jQuery("#"+d).submit();return false},confirmDelete:function(){var a=confirm("Are you sure you want to delete selected record.");if(!a){return false}},onClickSelectButtons:function(c){var a=c.closest(".btn-group");var b=c.closest(".btn");a.find(".btn").removeClass("active").removeClass("btn-primary").addClass("btn-default");a.find("input").prop("checked",false);b.addClass("btn-primary").removeClass("btn-default");b.find("input").prop("checked",true)},callAjax:function(a,b,c){return kazist_ajax.callAjax(a,b,c)},callAjaxByRoute:function(a,c,d){var b=kazist_document.web_base;a=a.split(".").join("/");b+="/"+a;return kazist_ajax.callAjax(b,c,d)},loadChart:function(b,d,f,a,e,c){kazist_chart.loadChart(b,d,f,a,e,c)},loadScriptByUrl:function(a){jQuery.ajax({url:a,dataType:"script",async:true,cache:false}).done(function(){}).fail(function(){var b=" Script for following url failed to load<br><br>"+a;var c="Loading Script Failed";kazist.showDialog(c,b,"error")})},showDialog:function(f,d,c,b,a){b=typeof b!=="undefined"?b:300;a=typeof a!=="undefined"?a:200;var e="";if(c==="error"||c==="danger"){e="btn-danger"}else{if(c==="info"||c==="success"){e="btn-success"}}jQuery("<div>"+d+"</div>").dialog({title:f,height:a,width:b,"class":"mydialog btn btn-primary",create:function(){jQuery(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").addClass("btn btn-danger btn-xs fa fa-times ");jQuery(this).closest(".ui-dialog").find(".ui-dialog-titlebar").addClass(e)}})},ajaxAutocomplete:function(c,b,a,f,e,d,g){kazist_autocomplete.ajaxAutocomplete(c,b,a,f,e,d,g)},addSpinningIcon:function(b,a){console.log(b);b.prepend('<i class="fa fa-spinner fa-spin"></i>')},removeSpinningIcon:function(a){a.find(".fa-spinner").remove()},toggleNavbarMethod:function(){if(jQuery(window).width()>768){jQuery(".navbar .dropdown").on("mouseover",function(){jQuery(".dropdown-toggle",this).trigger("click")}).on("mouseout",function(){jQuery(".dropdown-toggle",this).trigger("click").blur()})}else{jQuery(".navbar .dropdown").off("mouseover").off("mouseout")}},serializeFormJSON:function(c){var d={};var b=c.serializeArray();jQuery.each(b,function(){if(d[this.name]){if(!d[this.name].push){d[this.name]=[d[this.name]]}d[this.name].push(this.value||"")}else{d[this.name]=this.value||""}});return d},createNestedObject:function(d,c,a){if(c.length===1){d[c[0]]=a}else{var b=c.shift();d[b]=kazist.createNestedObject(typeof d[b]==="undefined"?{}:d[b],c,a)}return d},createCookie:function(d,e,b){var a;if(b){var c=new Date();c.setTime(c.getTime()+(b*60*60*1000));a="; expires="+c.toGMTString()}else{a=""}document.cookie=encodeURIComponent(d)+"="+encodeURIComponent(e)+a+"; path=/"},readCookie:function(b){var e=encodeURIComponent(b)+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)===" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return decodeURIComponent(f.substring(e.length,f.length))}}return null},eraseCookie:function(a){kazist.createCookie(a,"",-1)}}}();kazist_ajax=function(){return{completed:false,callAjax:function(a,d,e){var c="";d._token=jQuery("#_token").val();console.log(d);e=typeof e!=="undefined"?e:true;var b=jQuery.ajax({method:"POST",url:a,async:false,data:d}).done(function(f){if(kazist_ajax.isJsonString(f)){c=jQuery.parseJSON(f)}else{c=f}kazist_ajax.completed=true}).fail(function(f){title="Ajax Call failed.";message="The Ajax call to the following url has failed.<br><br>"+a+"<br><br>Status code is <b>"+f.status+"</b>";kazist.showDialog(title,message,"error");kazist_ajax.completed=true});if(e){kazist_ajax.delayReturn()}return c},delayReturn:function(){console.log("test");if(!kazist_ajax.completed){var a=1000;setTimeout(kazist_ajax.delayReturn(),a)}},isJsonString:function(b){try{JSON.parse(b)}catch(a){return false}return true}}}();